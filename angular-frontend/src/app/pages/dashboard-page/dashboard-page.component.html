<mat-toolbar color="primary">
  <mat-toolbar-row>
    <img
      id="logo"
      src="/assets/img/renault_logo_2022_white.png"
      alt="Renault 2022 Logo"
      width="30"
      height="40"
    />
    <span class="title">{{ title }}</span>
    <span class="example-spacer"></span>

    <fa-icon [icon]="faSignOut" id="sign-out" (click)="signOut()"></fa-icon>
  </mat-toolbar-row>
</mat-toolbar>

<div class="info" fxLayoutAlign="center center">
  <div fxFlex="33.33">
    <span id="name">{{ selfUserData.name }}</span>
  </div>
  <div fxFlex="33.33" fxLayoutAlign="center">
    <span id="role">{{ selfRole?.role_name }}</span>
  </div>

  <div fxFlex="33.33" fxLayoutAlign="end">
    <div
      class="add-button"
      (click)="this.addButton = !this.addButton"
      *ngIf="isManager"
    >
      <fa-icon
        [icon]="addButton ? faClose : faPlus"
        size="lg"
        style="color: white"
      ></fa-icon>
    </div>
  </div>
</div>

<mat-accordion class="example-headers-align" multi>
  <mat-expansion-panel
    *ngFor="let user of users"
    (opened)="getUserById(user.user_id)"
  >
    <mat-expansion-panel-header>
      <mat-panel-title> {{ user.name }}</mat-panel-title>
      <mat-panel-description>
        {{ user.username }}
        <mat-icon>account_circle</mat-icon>
      </mat-panel-description>
    </mat-expansion-panel-header>

    <div fxLayout="row">
      <div class="user-info">
        <p>Id:</p>
        <mat-form-field appearance="outline">
          <input #inputId matInput [value]="user.user_id" disabled />
        </mat-form-field>
      </div>

      <div class="user-info">
        <p>İsim:</p>
        <mat-form-field appearance="outline">
          <input #inputName matInput [value]="user.name" />
        </mat-form-field>
      </div>

      <div class="user-info">
        <p>Kullanıcı Adı:</p>
        <mat-form-field appearance="outline">
          <input #inputUsername matInput [value]="user.username" />
        </mat-form-field>
      </div>
    </div>

    <div
      fxLayout="row"
      fxLayoutAlign="space-around center"
      *ngIf="getDetail(user.user_id)"
    >
      <div class="user-info">
        <p>Rol:</p>
        <mat-form-field appearance="outline">
          <mat-select [value]="getDetail(user.user_id).role_id">
            <mat-option [value]="role.role_id" *ngFor="let role of roles">{{
              role.role_name
            }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="user-info">
        <p>Oluşturma Tarihi:</p>
        <mat-form-field appearance="outline">
          <input
            matInput
            [value]="getDetail(user.user_id).created_at"
            disabled
          />
        </mat-form-field>
      </div>

      <div class="user-info">
        <p>Son Değiştirme Tarihi:</p>
        <mat-form-field appearance="outline">
          <input matInput [value]="getDetail(user.user_id).updated_at" disabled=
          />
        </mat-form-field>
      </div>
    </div>
    <div class="update-delete" *ngIf="isManager">
      <button
        mat-raised-button
        color="primary"
        (click)="
          updateUser(inputId.value, inputUsername.value, inputName.value)
        "
      >
        Güncelle
      </button>
      <button
        mat-raised-button
        color="warn"
        (click)="deleteUser(inputId.value)"
      >
        Sil
      </button>
    </div>
  </mat-expansion-panel>
</mat-accordion>
